## 知見
### ecrと.envについて
この作り方ではecrには.envはpushされないです  
entrypoint.shは  
```
ンテナが起動する際に動的に環境変数をファイルに書き込むことが可能となります。つまり、Dockerイメージ自体は環境変数の内容を含んでいませんが、コンテナが実行されるときにその環境変数の値が書き込まれます。
```
という使われ方をするため、直接.envを指定しているわけではないからです  
  
まとめるとコンテナが実行されるタイミングで、entrypoint.shが実行され、container_definitionsに指定されているAPP_ENV_VALUESがセットされます  
  
そのため、ecrにあるimageを使用する際には、.envの値を指定する必要があります
   

### ecrについて
このコードでは、本番とstgでecrをわkれるようにしていますが、上記の理由から、分けないで、いいかもしれません。  
というのも、ブランチ運用が、main->stg->prodのように、完全位守られていれば、stgで作成したimageを使用できるためです  
ただこのやり方だと、main->prodへマージした際にそうするかわからないです。  致命的なバグが出た場合は、main->prodのマージを行うことが出てくるかもしれません。
